{"id":"c0c128ec-b546-4ed4-83ac-7adcce8ed502","revision":0,"last_node_id":68,"last_link_id":120,"nodes":[{"id":52,"type":"PreviewAny","pos":[1260.530276517644,406.20704743280027],"size":[732.8167837524413,163.87035125732427],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":111}],"outputs":[],"title":"Prompt Preview","properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"PreviewAny"},"widgets_values":[null,null,null]},{"id":41,"type":"Image Resize (rgthree)","pos":[-98.08812596873607,47.594850652429834],"size":[225,249.6484375],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":89},{"localized_name":"measurement","name":"measurement","type":"COMBO","widget":{"name":"measurement"},"link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"fit","name":"fit","type":"COMBO","widget":{"name":"fit"},"link":null},{"localized_name":"method","name":"method","type":"COMBO","widget":{"name":"method"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[90]},{"localized_name":"WIDTH","name":"WIDTH","type":"INT","links":null},{"localized_name":"HEIGHT","name":"HEIGHT","type":"INT","links":null}],"properties":{"cnr_id":"rgthree-comfy","ver":"1.0.2512112053","Node name for S&R":"Image Resize (rgthree)"},"widgets_values":["pixels",1024,1024,"pad","nearest-exact"]},{"id":61,"type":"JC","pos":[965.1559290862733,923.7000962237889],"size":[289.548828125,174],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":null},{"localized_name":"extra_options","name":"extra_options","shape":7,"type":"JOYCAPTION_EXTRA_OPTIONS","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"prompt_style","name":"prompt_style","type":"COMBO","widget":{"name":"prompt_style"},"link":null},{"localized_name":"caption_length","name":"caption_length","type":"COMBO","widget":{"name":"caption_length"},"link":null},{"localized_name":"memory_management","name":"memory_management","type":"COMBO","widget":{"name":"memory_management"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[]}],"properties":{"cnr_id":"comfyui-joycaption","ver":"2.0.2","Node name for S&R":"JC"},"widgets_values":["joycaption-beta-one-fp8","Balanced (8-bit)","Descriptive","short","Clear After Run"]},{"id":62,"type":"LayerUtility: ImageRemoveAlpha","pos":[197.77437900692686,157.42229901690996],"size":[313.3931640625,102],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"RGBA_image","name":"RGBA_image","type":"IMAGE","link":114},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"fill_background","name":"fill_background","type":"BOOLEAN","widget":{"name":"fill_background"},"link":null},{"localized_name":"background_color","name":"background_color","type":"STRING","widget":{"name":"background_color"},"link":null}],"outputs":[{"localized_name":"RGB_image","name":"RGB_image","type":"IMAGE","links":[113,115,116]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"2.0.33","Node name for S&R":"LayerUtility: ImageRemoveAlpha"},"widgets_values":[true,"#FFFFFFFF"],"color":"rgba(38, 73, 116, 0.7)"},{"id":23,"type":"InspyrenetRembg","pos":[115.97340383627535,-198.6782874587084],"size":[262.5,143.54166666666669],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":90},{"localized_name":"torchscript_jit","name":"torchscript_jit","type":"COMBO","widget":{"name":"torchscript_jit"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[114]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[81]}],"properties":{"cnr_id":"comfyui-inspyrenet-rembg","ver":"1.1.1","Node name for S&R":"InspyrenetRembg"},"widgets_values":["default"]},{"id":51,"type":"PreviewImage","pos":[1201.1143357827832,0.4118299859013306],"size":[376.3855675048827,360.3471756286622],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":115}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":39,"type":"ToolYoloCropper","pos":[-389.14982367149395,43.09279332799567],"size":[225,250.20833333333334],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":120},{"localized_name":"object","name":"object","type":"COMBO","widget":{"name":"object"},"link":null},{"localized_name":"padding","name":"padding","type":"INT","widget":{"name":"padding"},"link":null}],"outputs":[{"localized_name":"bounding box","name":"bounding box","type":"BBOX","links":null},{"localized_name":"image yolo detections","name":"image yolo detections","type":"IMAGE","links":[]},{"localized_name":"image original crop","name":"image original crop","type":"IMAGE","links":[]},{"localized_name":"image square crop","name":"image square crop","type":"IMAGE","links":[89]},{"localized_name":"mask original crop","name":"mask original crop","type":"MASK","links":null},{"localized_name":"mask square crop","name":"mask square crop","type":"MASK","links":null}],"properties":{"cnr_id":"ComfyUI-Yolo-Cropper","ver":"357b503a43f101e6145c6878608a6e2a1bf41f03","Node name for S&R":"ToolYoloCropper"},"widgets_values":["person",0]},{"id":54,"type":"PrimitiveString","pos":[-663.3740548041467,429.38904632581085],"size":[270,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[99,108]}],"title":"Character Name","properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"PrimitiveString"},"widgets_values":["mmmargosha"]},{"id":50,"type":"SaveImageTextDataSetToFolder","pos":[765.7159968057302,265.6284334614713],"size":[354.4908203125,106],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":116},{"localized_name":"texts","name":"texts","type":"STRING","widget":{"name":"texts"},"link":110},{"localized_name":"folder_name","name":"folder_name","type":"STRING","widget":{"name":"folder_name"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":99}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"SaveImageTextDataSetToFolder"},"widgets_values":["","mmm","image"]},{"id":56,"type":"DownloadAndLoadFlorence2Model","pos":[-272.808261254778,661.8642687887378],"size":[332.9986328125,130],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[105]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.7","Node name for S&R":"DownloadAndLoadFlorence2Model"},"widgets_values":["microsoft/Florence-2-base","fp16","sdpa",false]},{"id":55,"type":"Florence2Run","pos":[81.07708330467065,658.4322980374567],"size":[400,364],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":113},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":105},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[109]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.7","Node name for S&R":"Florence2Run"},"widgets_values":["","more_detailed_caption",true,false,1024,3,true,"",814878952021758,"randomize"]},{"id":58,"type":"StringConcatenate","pos":[82.90896733539657,1070.9624433945312],"size":[400,200],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":108},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":109},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[110,111]}],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"StringConcatenate"},"widgets_values":["","",", "]},{"id":31,"type":"MaskToImage","pos":[1198.658214210224,-194.0690471183514],"size":[210,94.66145833333334],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":81}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[80]}],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"MaskToImage"},"widgets_values":[]},{"id":32,"type":"PreviewImage","pos":[1634.6303426917464,-189.1551854340299],"size":[430.9721788123496,294.02357593032633],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":80}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":3,"type":"LoadImage","pos":[-1487.510239321445,319.65706747617435],"size":[589.1666666666667,941.4322916666667],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[119]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.7.0","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_00379_.png",{"name":"upload","options":{"serialize":false,"canvasOnly":true},"label":"choose file to upload","type":"button","y":70.00000000000003,"last_y":70.00000000000003,"computedDisabled":false,"clicked":false,"computedHeight":24}]},{"id":64,"type":"LayerUtility: LoadImagesFromPath","pos":[-1271.3990060678948,58.38869067983621],"size":[338.2896484375,166],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"path","name":"path","type":"STRING","widget":{"name":"path"},"link":null},{"localized_name":"image_load_cap","name":"image_load_cap","shape":7,"type":"INT","widget":{"name":"image_load_cap"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","shape":7,"type":"INT","widget":{"name":"select_every_nth"},"link":null}],"outputs":[{"localized_name":"images","name":"images","shape":6,"type":"IMAGE","links":[118]},{"localized_name":"masks","name":"masks","shape":6,"type":"MASK","links":null},{"localized_name":"file_name","name":"file_name","shape":6,"type":"STRING","links":null},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"2.0.33","Node name for S&R":"LayerUtility: LoadImagesFromPath"},"widgets_values":["C:\\Users\\301FPS\\Pictures\\datasets\\mmm",0,1],"color":"rgba(38, 73, 116, 0.7)"},{"id":67,"type":"ComfySwitchNode","pos":[-810.2488256174881,60.93417360366405],"size":[270,78],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"on_false","name":"on_false","type":"IMAGE","link":119},{"localized_name":"on_true","name":"on_true","type":"IMAGE","link":118},{"localized_name":"switch","name":"switch","type":"BOOLEAN","widget":{"name":"switch"},"link":null}],"outputs":[{"localized_name":"output","name":"output","type":"IMAGE","links":[120]}],"title":"switch: is mass loading","properties":{"cnr_id":"comfy-core","ver":"0.8.0","Node name for S&R":"ComfySwitchNode"},"widgets_values":[false]},{"id":68,"type":"MarkdownNote","pos":[-2173.3481141369634,-272.11498324568277],"size":[834.5687589205729,479.62041136388063],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"README","properties":{},"widgets_values":["# Text for Note node in workflow / –¢–µ–∫—Å—Ç –¥–ª—è Note —É–∑–ª–∞ –≤ workflow\n\nCopy the following text and paste it into the **Note** node in ComfyUI:  \n–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –≤ —É–∑–µ–ª **Note** –≤ ComfyUI:\n\n---\n\n## üìã Usage Instructions / –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é workflow\n\n### üîÑ Loading Mode Switch (Switch: is mass loading) / –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (Switch: is mass loading)\n\n**Important / –í–∞–∂–Ω–æ:** Before running, select the image loading mode:  \n**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:\n\n- **‚òëÔ∏è TRUE (enabled)** ‚Äî Batch processing from folder / **‚òëÔ∏è TRUE (–≤–∫–ª—é—á–µ–Ω–æ)** ‚Äî –º–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑ –ø–∞–ø–∫–∏\n  - Uses `LoadImagesFromPath` node / –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∑–µ–ª `LoadImagesFromPath`\n  - Specify the path to the image folder in `LayerUtility: LoadImagesFromPath` node / –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ —É–∑–ª–µ `LayerUtility: LoadImagesFromPath`\n  - All images from the specified folder will be processed / –û–±—Ä–∞–±–æ—Ç–∞—é—Ç—Å—è –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏\n\n- **‚òê FALSE (disabled)** ‚Äî Single image processing / **‚òê FALSE (–≤—ã–∫–ª—é—á–µ–Ω–æ)** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\n  - Uses `LoadImage` node / –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∑–µ–ª `LoadImage`\n  - Select one image via the upload button in `LoadImage` node / –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –≤ —É–∑–ª–µ `LoadImage`\n  - Only the selected image will be processed / –û–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\n\n### ‚öôÔ∏è What to configure / –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:\n\n1. **Switch: is mass loading** ‚Äî select mode (TRUE/FALSE) / –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º (TRUE/FALSE)\n2. **Character Name** ‚Äî enter character name (will be added to each caption) / –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫ –∫–∞–∂–¥–æ–º—É caption)\n3. **LoadImagesFromPath** ‚Äî specify folder path (if using batch loading) / —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–∞—Å—Å–æ–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É)\n4. **SaveImageTextDataSetToFolder** ‚Äî specify folder for saving dataset / —É–∫–∞–∂–∏—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞\n\n### üöÄ After configuration, run the workflow! / –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ workflow!\n\n---\n"],"color":"#432","bgcolor":"#653"}],"links":[[80,31,0,32,0,"IMAGE"],[81,23,1,31,0,"MASK"],[89,39,3,41,0,"IMAGE"],[90,41,0,23,0,"IMAGE"],[99,54,0,50,3,"STRING"],[105,56,0,55,1,"FL2MODEL"],[108,54,0,58,0,"STRING"],[109,55,2,58,1,"STRING"],[110,58,0,50,1,"STRING"],[111,58,0,52,0,"STRING"],[113,62,0,55,0,"IMAGE"],[114,23,0,62,0,"IMAGE"],[115,62,0,51,0,"IMAGE"],[116,62,0,50,0,"IMAGE"],[118,64,0,67,1,"IMAGE"],[119,3,0,67,0,"IMAGE"],[120,67,0,39,0,"IMAGE"]],"groups":[{"id":1,"title":"Extract Prompt","bounding":[-299.2198666284334,577.860323648487,969.0763451774533,872.2190649276246],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"OUTPUT","bounding":[1135.6325761753362,-284.093129826732,969.0763451774533,872.2190649276246],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.7513148009015781,"offset":[2896.9283752100464,840.2007535378045]},"workflowRendererVersion":"LG"},"version":0.4}